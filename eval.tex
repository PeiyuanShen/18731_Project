\section{Evaluation}% 1-2pgs}

% what is your evaluation setup? methodology? metrics of interest?

% What did you do  test out the hypotheses? (E.g.
% measurements, simulations, constructing code)


% What are the key results .
In this section, we discuss our implementation of the system and evaluate the
security policies generated by our policy synthesizer.

\subsection{Implementation}
Our system choose \lancie as the target spring application to evaluate.
%
As of May 1st, \lancie contains $10498$ lines of java codes.
%
\lancie clearly separated APIs and functions with database manipulation, making
it an ideal target for us to evaluate.
%
We installed Doop on a Ubuntu 20.04 LTS image and used it to perform taint
analysis on \lancie and got the \textit{CallGraphEdge.csv} file which contains
$57925$ lines.

We implemented our policy synthesizer in Python and the synthesizer consists of
$214$ lines of codes as shown in Appendix.
%
We automatically synthesized policies for $67$ APIs.
%
Of all $67$ policies we generated, only three of them contain two statements and
all the other policies contain one statement.
%
We manually checked all $67$ policies to make sure that the synthesized output
is as expected.

\subsection{Vulnerabilities Detection}
Most software has the need to use and modify the database, but different roles
should have different permissions to operate the database. Once there is a role
in operating the database incorrectly, it will cause a lot of losses to the
enterprise. However, when software engineers develop software, it is possible to
forget to check permissions, which leads to some Vulnerabilities. Therefore,
from our generated policies, we can easily observe what vulnerabilities are in
the software.

\onecolumn
\begin{sidewaysfigure}[p]
  \caption{Manually detected vulnerabilities in LANcie API.}
  \label{tab:api}
  \centering
  \begin{tabular}{ |p{0.15\columnwidth} | p{0.15\columnwidth} | p{0.3\columnwidth} | p{0.2\columnwidth}|}
    \hline
    File                                                                         & Function & Policy & Vulnerabilities \\
    \hline
    ch.wisv.areafiftylan. users.controller. UserRestController                   &
    org.springframework. http.ResponseEntity add(UserDTO)                        &
    \begin{lstlisting}
"Principal": null,
"Action": "create(UserDTO)",
"Resource": "User"
    \end{lstlisting}                                                       &
    Modify the database without checking the role                                                                      \\
    \hline

    \hline
    ch.wisv.areafiftylan. extras.mailupdates. controller. SubscriptionController &
    org.springframework. http.ResponseEntity addSubscription (SubscriptionDTO)   &
    \begin{lstlisting}
"Principal": null,
"Action": "addSubscription",
"Resource": "Subscription"
    \end{lstlisting}                                                       &
    Modify the database without checking the role                                                                      \\
    \hline

    \hline
    ch.wisv.areafiftylan. products.controller. OrderRestController               &
    org.springframework. http.ResponseEntity createOrder (TicketDTO)             &
    \begin{lstlisting}
"Principal": null,
"Action": "create",
"Resource": "Order"
    \end{lstlisting}                                                       &
    Modify the database without checking the role                                                                      \\
    \hline

    \hline
    ch.wisv. areafiftylan.web. sponsor. controller. SponsorController            &
    org.springframework. http.ResponseEntity  createSponsor (Sponsor)            &
    \begin{lstlisting}
"Principal":[ROLE_COMMITTEE],
"Action": "createSponsor",
"Resource": "Sponsor"
    \end{lstlisting}                                                       &
    The administrator should also have the right to operate                                                            \\
    \hline
  \end{tabular}
\end{sidewaysfigure}
\twocolumn
